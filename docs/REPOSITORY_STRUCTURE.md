# Структура репозиториев Eurodib

## Обзор

Проект разделён на отдельные репозитории для разделения ответственности и упрощения разработки.

```
edib/
├── eurodib-frontend/     # Next.js фронтенд
├── eurodib-strapi/       # Strapi CMS
└── sap-sync/             # SAP → Strapi синхронизация (будущее)
```

## Репозитории

### 1. eurodib-frontend

**Технологии:** Next.js 16, TypeScript, React

**Ответственность:**
- UI/UX фронтенда
- Роутинг и страницы
- Компоненты и layouts
- Интеграция с Strapi API
- Интеграция с SAP API (через gateway)

**Структура:**
```
eurodib-frontend/
├── pages/              # Next.js страницы
├── components/         # React компоненты
├── lib/
│   ├── api/           # API функции (Strapi/SAP)
│   ├── mock/          # Mock данные
│   ├── types/         # TypeScript типы
│   └── utils/         # Утилиты
├── public/            # Статические файлы
└── docs/              # Документация
```

**Документация:**
- [ARCHITECTURE.md](./ARCHITECTURE.md) — архитектура
- [STRAPI_DECISIONS.md](./STRAPI_DECISIONS.md) — решения по Strapi

### 2. eurodib-strapi

**Технологии:** Strapi, PostgreSQL, Docker Compose

**Ответственность:**
- CMS для маркетингового контента
- Управление брендами, категориями, медиа
- SEO метаданные
- Контент для страниц (описания, баннеры)

**Структура:**
```
eurodib-strapi/
├── docker-compose.yml  # PostgreSQL
├── .env.example       # Шаблон переменных окружения
├── src/               # Strapi код (после установки)
└── README.md          # Документация
```

**Данные в Strapi:**
- Brands (бренды)
- Categories (категории)
- Products (метаданные, не транзакции)
- Videos (видео)
- Catalogues (каталоги)
- Promos (промо)
- Price Lists (прайс-листы)
- Orders (заказы, метаданные)

**Данные НЕ в Strapi:**
- Транзакции
- Цены и остатки (из SAP)
- Клиентские данные (из SAP)

### 3. sap-sync (будущее)

**Технологии:** Node.js, TypeScript (планируется)

**Ответственность:**
- Синхронизация данных SAP → Strapi
- Периодическая синхронизация товаров, цен, остатков
- Обработка изменений из SAP

**Статус:** Не реализован, планируется позже

## Взаимодействие репозиториев

```
┌─────────────────┐
│  eurodib-frontend │
│   (Next.js)      │
└────────┬─────────┘
         │
         ├──────────────┐
         │              │
         ▼              ▼
┌─────────────────┐  ┌──────────────┐
│  eurodib-strapi  │  │   SAP API    │
│   (Strapi)       │  │   Gateway    │
└─────────────────┘  └──────────────┘
         ▲
         │
         │ (будущее)
         │
┌─────────────────┐
│   sap-sync      │
│   (Service)     │
└─────────────────┘
```

## Разделение данных

### SAP (мастер данных для транзакций)
- Товары (SKU, цены, остатки)
- Заказы и транзакции
- Клиенты
- Реальная инвентаризация

### Strapi (мастер данных для контента)
- Бренды (метаданные, описания, логотипы)
- Категории (описания, SEO)
- Медиа (изображения, видео)
- Маркетинговый контент
- SEO метаданные

## Разработка

### Локальная разработка

1. **eurodib-frontend:**
   ```bash
   cd eurodib-frontend
   npm install
   npm run dev
   ```

2. **eurodib-strapi:**
   ```bash
   cd eurodib-strapi
   cp .env.example .env
   docker-compose up -d
   # После установки Strapi:
   npm run develop
   ```

### Переменные окружения

Каждый репозиторий имеет свой `.env`:
- `eurodib-frontend/.env` — Next.js переменные
- `eurodib-strapi/.env` — Strapi и PostgreSQL переменные

## Миграция и деплой

### Разработка
- Каждый репозиторий деплоится отдельно
- `eurodib-frontend` → Vercel/Netlify
- `eurodib-strapi` → Railway/Heroku/DigitalOcean

### Production
- Синхронизация через API между репозиториями
- Strapi API доступен для Next.js
- SAP API доступен для Next.js (через gateway)

## Преимущества разделения

1. **Независимая разработка** — команды могут работать параллельно
2. **Разные технологии** — каждый репозиторий использует оптимальный стек
3. **Масштабируемость** — можно масштабировать отдельно
4. **Безопасность** — изоляция данных и доступа
5. **Простота деплоя** — каждый сервис деплоится независимо

## Следующие шаги

1. ✅ Создан `eurodib-strapi` репозиторий
2. ⏳ Установить Strapi в `eurodib-strapi`
3. ⏳ Настроить модели данных в Strapi
4. ⏳ Подключить Next.js к Strapi API
5. ⏳ Настроить SAP API gateway
6. ⏳ Создать `sap-sync` сервис (будущее)
